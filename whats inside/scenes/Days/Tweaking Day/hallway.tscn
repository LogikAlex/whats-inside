[gd_scene load_steps=38 format=4 uid="uid://flvjs6aut0gk"]

[ext_resource type="Script" uid="uid://cp0wwmeygvv0p" path="res://scripts/tweakingDay/hallway.gd" id="1_8hjva"]
[ext_resource type="TileSet" uid="uid://dyf0c38hkcw8q" path="res://apt_tiles.tres" id="1_jrgqd"]
[ext_resource type="PackedScene" uid="uid://c8wffxipu48vg" path="res://scenes/player.tscn" id="2_sh1y7"]
[ext_resource type="PackedScene" uid="uid://dwlrdkw6lmigf" path="res://scenes/Days/Tweaking Day/box_spawn_trigger.tscn" id="3_co0bu"]
[ext_resource type="PackedScene" uid="uid://d24rahutnton5" path="res://scenes/DialogueArea.tscn" id="3_wt758"]
[ext_resource type="Script" uid="uid://oy7o6mveliwr" path="res://scripts/tweakingDay/removeDoor.gd" id="4_33wpw"]
[ext_resource type="PackedScene" uid="uid://banhcwdrm7u2h" path="res://scenes/Objects/theBox.tscn" id="4_bohkm"]
[ext_resource type="Script" uid="uid://divt8ny53jpna" path="res://scripts/DialogueExportResource.gd" id="4_rtk4a"]
[ext_resource type="Script" uid="uid://c7hf8sppb4268" path="res://scripts/DialogueTextResource.gd" id="5_wt758"]
[ext_resource type="AudioStream" uid="uid://dy3b7ol61unl7" path="res://assets/sfx/ian_voice.wav" id="6_rtk4a"]
[ext_resource type="Script" uid="uid://bj218rqao0syu" path="res://scripts/DialogueFunctionResource.gd" id="8_p6yxs"]
[ext_resource type="PackedScene" uid="uid://cpuj6ktdfqhdu" path="res://scenes/change_room.tscn" id="10_rcx2i"]
[ext_resource type="Texture2D" uid="uid://dyllunv5djv0r" path="res://assets/Spritesheets/crack_animation_1.png" id="11_wh80d"]
[ext_resource type="Texture2D" uid="uid://b6bwgwq3o22b0" path="res://assets/Spritesheets/crack_animation_2.png" id="12_ftgno"]
[ext_resource type="PackedScene" uid="uid://l0j5l1uomn55" path="res://scenes/Days/Tweaking Day/crack_trigger.tscn" id="12_xakgp"]

[sub_resource type="Gradient" id="Gradient_p6yxs"]
offsets = PackedFloat32Array(0, 0.7310606)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_co0bu"]
gradient = SubResource("Gradient_p6yxs")
width = 244
height = 244
fill = 1
fill_from = Vector2(0.5, 0.4871795)

[sub_resource type="Resource" id="Resource_rtk4a"]
script = ExtResource("5_wt758")
text = "*oh no."
text_speed = 6.0
text_sound = ExtResource("6_rtk4a")
text_volume_pitch_min = 0.7
text_volume_pitch_max = 0.65
metadata/_custom_type_script = "uid://c7hf8sppb4268"

[sub_resource type="Resource" id="Resource_vq2ig"]
script = ExtResource("8_p6yxs")
target_path = NodePath("..")
function_name = "play_music"
hide_dialogue_box = true
metadata/_custom_type_script = "uid://bj218rqao0syu"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wh80d"]
size = Vector2(52, 3)

[sub_resource type="Resource" id="Resource_rcx2i"]
script = ExtResource("5_wt758")
text = "*maybe i could go back?"
text_speed = 12.0
text_sound = ExtResource("6_rtk4a")
text_volume_pitch_min = 0.7
text_volume_pitch_max = 0.65
metadata/_custom_type_script = "uid://c7hf8sppb4268"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xakgp"]
size = Vector2(20, 7)

[sub_resource type="AtlasTexture" id="AtlasTexture_xakgp"]
atlas = ExtResource("11_wh80d")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_ftgno"]
atlas = ExtResource("11_wh80d")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8hjva"]
atlas = ExtResource("11_wh80d")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_p6yxs"]
atlas = ExtResource("11_wh80d")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_vq2ig"]
atlas = ExtResource("11_wh80d")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_waglt"]
atlas = ExtResource("11_wh80d")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_l6cbj"]
atlas = ExtResource("11_wh80d")
region = Rect2(96, 0, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_ieh1j"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xakgp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ftgno")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8hjva")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p6yxs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vq2ig")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_waglt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l6cbj")
}],
"loop": false,
"name": &"crack_anim",
"speed": 12.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_ieh1j"]
atlas = ExtResource("12_ftgno")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_uwo3v"]
atlas = ExtResource("12_ftgno")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_r6wim"]
atlas = ExtResource("12_ftgno")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_u1ehb"]
atlas = ExtResource("12_ftgno")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_acxeq"]
atlas = ExtResource("12_ftgno")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_5lced"]
atlas = ExtResource("12_ftgno")
region = Rect2(80, 0, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_fmwpr"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ieh1j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uwo3v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r6wim")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u1ehb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_acxeq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5lced")
}],
"loop": false,
"name": &"crack_anim",
"speed": 12.0
}]

[node name="Hallway" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_8hjva")

[node name="DoorGone" type="TileMapLayer" parent="."]
visible = false
tile_map_data = PackedByteArray("AAABAP7/AAADAAAAAAABAP//AAADAAEAAAAAAP//AAADAAEAAAACAP//AAADAAEAAAAAAP7/AAADAAAAAAACAP7/AAADAAAAAAA=")
tile_set = ExtResource("1_jrgqd")
metadata/_edit_lock_ = true

[node name="Tiles" type="TileMapLayer" parent="."]
z_index = -1
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAAAAP//AAAGAAEAAAAAAP7/AAAGAAAAAAACAP7/AAAGAAIAAAD//wIAAAACAAIAAAD//wEAAAACAAIAAAD//wAAAAACAAIAAAD/////AAACAAEAAAD///7/AAACAAAAAAACAP//AAAGAAMAAAABAP//AAADAAMAAAABAP7/AAADAAIAAAADAP7/AAAEAAAAAAADAP//AAAEAAEAAAADAAEAAAAEAAIAAAADAAAAAAAEAAIAAAD//wMAAAACAAIAAAD//wQAAAACAAIAAAD//wUAAAACAAIAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAABAAQAAAAAAAAAAAABAAMAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAADAAIAAAAEAAIAAAADAAMAAAAEAAIAAAADAAQAAAAEAAIAAAADAAUAAAAEAAIAAAAAAAUAAAAAAAAAAAABAAUAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAABAAYAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAoAAAAAAAAAAAABAAoAAAAAAAAAAAACAAoAAAAAAAAAAAACAAkAAAAAAAAAAAACAAgAAAAAAAAAAAACAAcAAAAAAAAAAAABAAcAAAAAAAAAAAABAAgAAAAAAAAAAAABAAkAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA8AAAAAAAAAAAABAA8AAAAAAAAAAAACAA8AAAAAAAAAAAACAA4AAAAAAAAAAAACAA0AAAAAAAAAAAACAAwAAAAAAAAAAAACAAsAAAAAAAAAAAABAAsAAAAAAAAAAAABAAwAAAAAAAAAAAABAA0AAAAAAAAAAAABAA4AAAAAAAAAAAD//wYAAAACAAIAAAD//wcAAAACAAIAAAD//wgAAAACAAIAAAD//wkAAAACAAIAAAD//woAAAACAAIAAAD//wsAAAACAAIAAAD//wwAAAACAAIAAAD//w0AAAACAAIAAAD//w4AAAACAAIAAAD//w8AAAACAAIAAAADAAYAAAAEAAIAAAADAAcAAAAEAAIAAAADAAgAAAAEAAIAAAADAAkAAAAEAAIAAAADAAoAAAAEAAIAAAADAAsAAAAEAAIAAAADAAwAAAAEAAIAAAADAA0AAAAEAAIAAAADAA4AAAAEAAIAAAADAA8AAAAEAAIAAAADABAAAAAEAAQAAAACABAAAAABAAQAAAAAABAAAAAAAAQAAAD//xAAAAACAAQAAAABABAAAAAFAAMAAAA=")
tile_set = ExtResource("1_jrgqd")
metadata/_edit_lock_ = true

[node name="Player" parent="." instance=ExtResource("2_sh1y7")]
position = Vector2(24, 9)
speed = 50.0

[node name="playerLight" type="PointLight2D" parent="Player"]
scale = Vector2(0.2684426, 0.26071328)
color = Color(0.8255811, 0.83836645, 0.9193533, 1)
energy = 0.29
range_item_cull_mask = 3
texture = SubResource("GradientTexture2D_co0bu")

[node name="Camera2D2" type="Camera2D" parent="Player"]
position = Vector2(0, 18)
process_callback = 0
limit_smoothed = true
position_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true

[node name="ambience" type="CanvasModulate" parent="."]
color = Color(0.15921146, 0.12177811, 0.30488247, 1)

[node name="dialogueTrigger" parent="." instance=ExtResource("3_wt758")]
position = Vector2(24, 56)
activate_instant = true
only_activate_once = true
dialogue = Array[ExtResource("4_rtk4a")]([SubResource("Resource_rtk4a"), SubResource("Resource_vq2ig")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="dialogueTrigger"]
shape = SubResource("RectangleShape2D_wh80d")

[node name="dialogueTrigger2" parent="." instance=ExtResource("3_wt758")]
position = Vector2(24, 191)
activate_instant = true
only_activate_once = true
dialogue = Array[ExtResource("4_rtk4a")]([SubResource("Resource_rcx2i")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="dialogueTrigger2"]
shape = SubResource("RectangleShape2D_wh80d")

[node name="boxSpawnTrigger" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 27)
boxObject = NodePath("../TheBox")

[node name="boxSpawnTrigger6" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 21)
boxObject = NodePath("../TheBox11")

[node name="boxSpawnTrigger2" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 34)
boxObject = NodePath("../TheBox2")

[node name="boxSpawnTrigger3" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 47)
boxObject = NodePath("../TheBox3")

[node name="boxSpawnTrigger4" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 64)
boxObject = NodePath("../TheBox4")

[node name="boxSpawnTrigger5" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 93)
boxObject = NodePath("../TheBox5")

[node name="boxSpawnTrigger7" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 116)
boxObject = NodePath("../TheBox6")

[node name="boxSpawnTrigger8" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 125)
boxObject = NodePath("../TheBox7")

[node name="boxSpawnTrigger9" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 172)
boxObject = NodePath("../TheBox8")

[node name="boxSpawnTrigger10" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 196)
boxObject = NodePath("../TheBox9")

[node name="boxSpawnTrigger11" parent="." node_paths=PackedStringArray("boxObject") instance=ExtResource("3_co0bu")]
position = Vector2(23, 218)
boxObject = NodePath("../TheBox10")

[node name="removeDoor" parent="." instance=ExtResource("3_co0bu")]
position = Vector2(23, 140)
script = ExtResource("4_33wpw")

[node name="TheBox" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(7, 47)

[node name="TheBox2" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(42, 56)

[node name="TheBox3" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(36, 73)

[node name="TheBox4" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(14, 91)

[node name="TheBox5" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(37, 121)

[node name="TheBox6" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(17, 153)

[node name="TheBox7" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(27, 165)

[node name="TheBox8" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(9, 195)

[node name="TheBox9" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(40, 220)

[node name="TheBox10" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(9, 238)

[node name="TheBox11" parent="." instance=ExtResource("4_bohkm")]
modulate = Color(1, 1, 1, 0)
position = Vector2(42, 22)

[node name="toNext" parent="." instance=ExtResource("10_rcx2i")]
position = Vector2(24, 264)
wanted_room_path = "res://scenes/Days/Tweaking Day/tilted_hallway.tscn"
wanted_player_pos = Vector2(24, 9)

[node name="CollisionShape2D" type="CollisionShape2D" parent="toNext"]
shape = SubResource("RectangleShape2D_xakgp")

[node name="crack_1" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(8, 9)
sprite_frames = SubResource("SpriteFrames_ieh1j")
animation = &"crack_anim"

[node name="crack_3" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(8, 183)
sprite_frames = SubResource("SpriteFrames_ieh1j")
animation = &"crack_anim"

[node name="crack_4" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(40, 232)
sprite_frames = SubResource("SpriteFrames_ieh1j")
animation = &"crack_anim"
flip_h = true

[node name="crack_2" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(40, 87)
sprite_frames = SubResource("SpriteFrames_fmwpr")
animation = &"crack_anim"

[node name="crack_5" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(8, 132)
sprite_frames = SubResource("SpriteFrames_fmwpr")
animation = &"crack_anim"
flip_h = true
flip_v = true

[node name="crack_trigger" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("12_xakgp")]
position = Vector2(24, 40)
crack_sprite = NodePath("../crack_1")

[node name="crack_trigger2" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("12_xakgp")]
position = Vector2(24, 81)
crack_sprite = NodePath("../crack_2")

[node name="crack_trigger3" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("12_xakgp")]
position = Vector2(24, 185)
crack_sprite = NodePath("../crack_3")

[node name="crack_trigger4" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("12_xakgp")]
position = Vector2(24, 213)
crack_sprite = NodePath("../crack_4")

[node name="crack_trigger5" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("12_xakgp")]
position = Vector2(24, 120)
crack_sprite = NodePath("../crack_5")
