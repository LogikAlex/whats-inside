[gd_scene load_steps=31 format=4 uid="uid://c2e8dkwi30x4n"]

[ext_resource type="TileSet" uid="uid://dyf0c38hkcw8q" path="res://apt_tiles.tres" id="1_gh4ac"]
[ext_resource type="PackedScene" uid="uid://c8wffxipu48vg" path="res://scenes/player.tscn" id="2_uu3by"]
[ext_resource type="Texture2D" uid="uid://c4s1foax8pwx4" path="res://assets/Spritesheets/player_idle_front.png" id="4_mca38"]
[ext_resource type="PackedScene" uid="uid://d24rahutnton5" path="res://scenes/DialogueArea.tscn" id="5_nrqc5"]
[ext_resource type="Script" uid="uid://divt8ny53jpna" path="res://scripts/DialogueExportResource.gd" id="6_dsrch"]
[ext_resource type="Script" uid="uid://c7hf8sppb4268" path="res://scripts/DialogueTextResource.gd" id="7_klifs"]
[ext_resource type="AudioStream" uid="uid://dy3b7ol61unl7" path="res://assets/sfx/ian_voice.wav" id="8_xhbb7"]
[ext_resource type="Texture2D" uid="uid://dyllunv5djv0r" path="res://assets/Spritesheets/crack_animation_1.png" id="9_dimb2"]
[ext_resource type="Script" uid="uid://tx72jndkblpr" path="res://scripts/tweakingDay/crack_trigger_stretch.gd" id="10_nrqc5"]
[ext_resource type="PackedScene" uid="uid://l0j5l1uomn55" path="res://scenes/Days/Tweaking Day/crack_trigger.tscn" id="10_ucl0e"]
[ext_resource type="PackedScene" uid="uid://cpuj6ktdfqhdu" path="res://scenes/change_room.tscn" id="11_6ybvr"]
[ext_resource type="Texture2D" uid="uid://xtdk2s5q4bfx" path="res://assets/objects/broken_picture.png" id="11_xcg0r"]
[ext_resource type="Texture2D" uid="uid://c5t4va7d62rg3" path="res://assets/misc/glass_shard.png" id="12_mca38"]
[ext_resource type="Texture2D" uid="uid://dmebk3gpcrv4a" path="res://assets/misc/glass_shard_2.png" id="13_nrqc5"]
[ext_resource type="Texture2D" uid="uid://b5hki7kvg72vf" path="res://assets/misc/dust_particle.png" id="14_mca38"]

[sub_resource type="Gradient" id="Gradient_yw21r"]
offsets = PackedFloat32Array(0, 0.7310606)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_14yq6"]
gradient = SubResource("Gradient_yw21r")
width = 244
height = 244
fill = 1
fill_from = Vector2(0.5, 0.4871795)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_871tt"]
light_mode = 1

[sub_resource type="Resource" id="Resource_p0vn8"]
script = ExtResource("7_klifs")
text = "*it was me. it was me. it was me. it was me. it was me. it was me. it was me. it was me. it was me. it was me."
text_speed = 20.0
text_sound = ExtResource("8_xhbb7")
text_volume_db = 4
text_volume_pitch_min = 0.5
text_volume_pitch_max = 0.6
metadata/_custom_type_script = "uid://c7hf8sppb4268"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_67n0g"]
size = Vector2(15, 9)

[sub_resource type="Resource" id="Resource_nrqc5"]
script = ExtResource("7_klifs")
text = "*just another thing i ruined."
text_speed = 12.0
text_sound = ExtResource("8_xhbb7")
text_volume_pitch_min = 0.75
text_volume_pitch_max = 0.7
metadata/_custom_type_script = "uid://c7hf8sppb4268"

[sub_resource type="AtlasTexture" id="AtlasTexture_xakgp"]
atlas = ExtResource("9_dimb2")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_ftgno"]
atlas = ExtResource("9_dimb2")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8hjva"]
atlas = ExtResource("9_dimb2")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_p6yxs"]
atlas = ExtResource("9_dimb2")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_vq2ig"]
atlas = ExtResource("9_dimb2")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_waglt"]
atlas = ExtResource("9_dimb2")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_l6cbj"]
atlas = ExtResource("9_dimb2")
region = Rect2(96, 0, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_4g2m1"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xakgp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ftgno")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8hjva")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p6yxs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vq2ig")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_waglt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l6cbj")
}],
"loop": false,
"name": &"crack_anim",
"speed": 12.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_idxwo"]
size = Vector2(20, 7)

[node name="Remember" type="Node2D"]
y_sort_enabled = true

[node name="Tiles" type="TileMapLayer" parent="."]
z_index = -1
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAABAAIAAAAAAAAAAAACAAIAAAAAAAAAAAAAAAMAAAAAAAQAAAACAAMAAAABAAQAAAADAAMAAAAEAAQAAAD//wMAAAACAAQAAAD//wIAAAACAAIAAAD//wEAAAACAAIAAAD//wAAAAACAAIAAAADAAIAAAAEAAIAAAADAAEAAAAEAAIAAAADAAAAAAAEAAIAAAAAAP//AAADAAEAAAABAP//AAADAAEAAAACAP//AAADAAEAAAADAP7/AAAEAAAAAAADAP//AAAEAAEAAAD///7/AAACAAAAAAD/////AAACAAEAAAABAP7/AAADAAAAAAAAAP7/AAADAAAAAAACAP7/AAADAAAAAAABAAMAAAAFAAMAAAA=")
tile_set = ExtResource("1_gh4ac")
metadata/_edit_lock_ = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(24, 21)
process_callback = 0
limit_smoothed = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_left_margin = 1.0
drag_top_margin = 1.0
drag_right_margin = 1.0
drag_bottom_margin = 1.0

[node name="Player" parent="." instance=ExtResource("2_uu3by")]
position = Vector2(24, 41)
speed = 50.0

[node name="playerLight" type="PointLight2D" parent="Player"]
scale = Vector2(0.2684426, 0.26071328)
color = Color(0.8255811, 0.83836645, 0.9193533, 1)
energy = 0.29
range_item_cull_mask = 3
texture = SubResource("GradientTexture2D_14yq6")

[node name="ambience" type="CanvasModulate" parent="."]
color = Color(0.15921146, 0.12177811, 0.30488247, 1)

[node name="sillhouete" type="Sprite2D" parent="."]
visible = false
modulate = Color(0, 0, 0, 1)
material = SubResource("CanvasItemMaterial_871tt")
position = Vector2(24, 13)
texture = ExtResource("4_mca38")
flip_h = true
hframes = 2

[node name="DialogueArea2" parent="." instance=ExtResource("5_nrqc5")]
position = Vector2(24, 43)
activate_instant = true
only_activate_once = true
dialogue = Array[ExtResource("6_dsrch")]([SubResource("Resource_p0vn8")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="DialogueArea2"]
position = Vector2(-0.5, -0.5)
shape = SubResource("RectangleShape2D_67n0g")

[node name="DialogueArea3" parent="." instance=ExtResource("5_nrqc5")]
position = Vector2(24, 9)
dialogue = Array[ExtResource("6_dsrch")]([SubResource("Resource_nrqc5")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="DialogueArea3"]
position = Vector2(-0.5, -0.5)
shape = SubResource("RectangleShape2D_67n0g")

[node name="crack_1" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
position = Vector2(40, 19)
sprite_frames = SubResource("SpriteFrames_4g2m1")
animation = &"crack_anim"
flip_h = true
flip_v = true

[node name="crack_trigger" parent="." node_paths=PackedStringArray("crack_sprite") instance=ExtResource("10_ucl0e")]
position = Vector2(24, 31)
script = ExtResource("10_nrqc5")
crack_sprite = NodePath("../crack_1")

[node name="toNext" parent="." instance=ExtResource("11_6ybvr")]
position = Vector2(24, 56)
wanted_room_path = "res://scenes/Days/Tweaking Day/broken_livingroom.tscn"
wanted_player_pos = Vector2(38, 32)

[node name="CollisionShape2D" type="CollisionShape2D" parent="toNext"]
shape = SubResource("RectangleShape2D_idxwo")

[node name="BrokenPicture" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(24, 7)
texture = ExtResource("11_xcg0r")

[node name="GlassShard2" type="Sprite2D" parent="BrokenPicture"]
position = Vector2(11, 2)
rotation = -0.5235584
texture = ExtResource("12_mca38")

[node name="GlassShard3" type="Sprite2D" parent="BrokenPicture"]
position = Vector2(-13, 7)
rotation = -1.8325958
texture = ExtResource("12_mca38")

[node name="GlassShard4" type="Sprite2D" parent="BrokenPicture"]
position = Vector2(-12, 1)
rotation = 0.5235988
texture = ExtResource("13_nrqc5")

[node name="nail" type="Sprite2D" parent="."]
modulate = Color(0.32156864, 0.32156864, 0.36078432, 1)
position = Vector2(23.5, -16.5)
scale = Vector2(1, 1.0000005)
texture = ExtResource("14_mca38")
